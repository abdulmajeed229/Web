;/*FB_PKG_DELIM*/

__d("CometWebLinkEntityRenderer_entity.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{mask:!1},name:"CometWebLinkEntityRenderer_entity",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:[{kind:"Literal",name:"site",value:"comet"}],kind:"ScalarField",name:"url",storageKey:'url(site:"comet")'},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"web_link",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"fbclid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lynx_mode",storageKey:null}],type:"ExternalWebLink",abstractKey:null}],storageKey:null}],type:"WebLinkable",abstractKey:"__isWebLinkable"},{kind:"InlineFragment",selections:[{args:null,documentName:"CometWebLinkEntityRenderer_entity",fragmentName:"GroupsCometHashtagsStoryMessageHashtagLink_hashtag",fragmentPropName:"hashtag",kind:"ModuleImport"}],type:"GroupHashtag",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometWebLinkEntityRenderer_entity",fragmentName:"PagesCometPageLink_page",fragmentPropName:"page",kind:"ModuleImport"}],type:"Page",abstractKey:null},{args:null,kind:"FragmentSpread",name:"ProfileCometProfileLink_actor"}],type:"Entity",abstractKey:"__isEntity"};e.exports=a}),null);
__d("CometWebLinkEntityRenderer",["CometLink.react","CometRelay","CometWebLinkEntityRenderer_entity.graphql","ProfileCometProfileLink.react","react","recoverableViolation","useRenderLinkedEntity"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));a=i;var k=a.useEffect,l=a.c;h!==void 0?h:h=b("CometWebLinkEntityRenderer_entity.graphql");function m(a){var b=l(35),e=a.entity,f=a.entityIsWeakReference;a=a.node;var g;b[0]!==e.__typename||b[1]!==e.url||b[2]!==e.web_link?(g=function(){e.__typename==="ExternalUrl"&&e.url!=null&&(e.web_link==null?c("recoverableViolation")("entity.web_link from type "+e.__typename+" must not be null in CometWebLinkEntityRenderer.js","comet_infra"):e.web_link.url==null&&c("recoverableViolation")("web_link.url from type "+e.__typename+" must not be null in CometWebLinkEntityRenderer.js","comet_infra"))},b[0]=e.__typename,b[1]=e.url,b[2]=e.web_link,b[3]=g):g=b[3];var h;b[4]!==e?(h=[e],b[4]=e,b[5]=h):h=b[5];k(g,h);b[6]!==f||b[7]!==e.__typename||b[8]!==e.web_link?(g=function(){var a;if(f===!0)return d("useRenderLinkedEntity").EntityRenderType.WEAK_REFERENCE;return e.__typename==="ExternalUrl"&&((a=e.web_link)==null?void 0:(a=a.url)==null?void 0:a.includes("/policies/community-standards"))?d("useRenderLinkedEntity").EntityRenderType.COMMUNITY_STANDARDS:null},b[6]=f,b[7]=e.__typename,b[8]=e.web_link,b[9]=g):g=b[9];h=g;b[10]!==h?(g=h(),b[10]=h,b[11]=g):g=b[11];h=d("useRenderLinkedEntity").useRenderLinkedEntity(g);g=h==null?void 0:h.colorProp;var i=h==null?void 0:h.weight_DEPRECATED;h=h==null?void 0:h.icon;if(e.url==null)return a;if(e.__typename==="User"){var m;m=(m=h)!=null?m:null;var n;b[12]!==m||b[13]!==a?(n=j.jsxs(j.Fragment,{children:[m,a]}),b[12]=m,b[13]=a,b[14]=n):n=b[14];b[15]!==e||b[16]!==g||b[17]!==n?(m=j.jsx(c("ProfileCometProfileLink.react"),babelHelpers["extends"]({actor:e,navigationSource:"web_link",ref:null},g,{children:n})),b[15]=e,b[16]=g,b[17]=n,b[18]=m):m=b[18];return m}n=e.web_link;m=(m=n==null?void 0:n.url)!=null?m:e.url;g=g==null?void 0:g.color_DEPRECATED;var o=n==null?void 0:n.fbclid;n=n==null?void 0:n.lynx_mode;h=(h=h)!=null?h:null;var p;b[19]!==h||b[20]!==a?(p=j.jsxs(j.Fragment,{children:[h,a]}),b[19]=h,b[20]=a,b[21]=p):p=b[21];b[22]!==g||b[23]!==o||b[24]!==m||b[25]!==n||b[26]!==i||b[27]!==p?(h=j.jsx(c("CometLink.react"),{color_DEPRECATED:g,fbclid:o,href:m,lynxMode:n,weight_DEPRECATED:i,children:p}),b[22]=g,b[23]=o,b[24]=m,b[25]=n,b[26]=i,b[27]=p,b[28]=h):h=b[28];g=h;switch(e.__typename){case"GroupHashtag":case"Page":b[29]!==a?(o={children:a},b[29]=a,b[30]=o):o=b[30];b[31]!==g||b[32]!==e||b[33]!==o?(m=j.jsx(d("CometRelay").MatchContainer,{fallback:g,match:e,props:o}),b[31]=g,b[32]=e,b[33]=o,b[34]=m):m=b[34];return m;default:return g}}e=function(a,b,c,d,e){return j.jsx(m,{entity:b,entityIsWeakReference:(c=e)!=null?c:null,node:a})};g["default"]=e}),98);
__d("MAWDeferredUserVisibleErrorsNuxWrapper.react",["deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c,k=h||(h=c("react")),l=c("deferredLoadComponent")(c("requireDeferred")("MAWUserVisibleErrorsNuxWrapper.react").__setRef("MAWDeferredUserVisibleErrorsNuxWrapper.react"));function a(a){var b=j(3),c=a.children;a=a.hasNoMargin;var d;b[0]!==c||b[1]!==a?(d=k.jsx(l,{children:c,hasNoMargin:a}),b[0]=c,b[1]=a,b[2]=d):d=b[2];return d}g["default"]=a}),98);
__d("MAWFetchMoreMessagesWhenEnabled",["cr:1501","cr:7005"],(function(a,b,c,d,e,f,g){"use strict";c=(a=b("cr:7005"))!=null?a:b("cr:1501");d=c;g["default"]=d}),98);
__d("MWPFetchMessagesPage",["FBLogger","LSFactory","LSIntEnum","LSIssueMessagesRangeQueryStoredProcedure","LSMailboxMessagesRangeQueryDirection","LSMessagingThreadTypeUtil","asyncToGeneratorRuntime","gkx","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,g,i,j,k,l,m){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,f;b=(yield (b=a.messages_ranges_v2__generated).get.apply(b,i));if(b==null||(g==="before"?b.isLoadingBefore:b.isLoadingAfter))return;f=k==null?null:yield (f=a.messages_ranges_v2__generated).get.apply(f,k);if(k!=null&&(f==null||(g==="before"?f.isLoadingBefore:f.isLoadingAfter)))return;if(g==="before")if(f==null||b.hasMoreBefore){var n=d("LSMessagingThreadTypeUtil").isArmadilloSecure(j);if(n){if(m!=null)return m(a,b.threadKey,"before",e)}else return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),referenceTimestampMs:b.minTimestampMs,threadKey:b.threadKey})}else{n=d("LSMessagingThreadTypeUtil").isArmadilloSecure(c("nullthrows")(l));if(n){if(m!=null)return m(a,f.threadKey,"before",e)}else return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),referenceTimestampMs:f.minTimestampMs,threadKey:f.threadKey})}else if(f==null||b.hasMoreAfter){n=d("LSMessagingThreadTypeUtil").isArmadilloSecure(j);if(n)if(c("gkx")("23927")){if(m!=null)return m(a,b.threadKey,"after",e)}else throw c("FBLogger")("messenger_web_product").mustfix("Not possible to fetch more after for secure messages");else return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").AFTER),referenceTimestampMs:b.minTimestampMs,threadKey:b.threadKey})}else{n=d("LSMessagingThreadTypeUtil").isArmadilloSecure(c("nullthrows")(l));if(n)if(c("gkx")("23927")){if(m!=null)return m(a,f.threadKey,"after",e)}else throw c("FBLogger")("messenger_web_product").mustfix("Not possible to fetch more after for secure messages");else return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").AFTER),referenceTimestampMs:f.minTimestampMs,threadKey:f.threadKey})}});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":40")}g["default"]=a}),98);
__d("MWPFetchMessagesRangeForMessage",["FBLogger","I64","LSFactory","LSMessagePointQueryStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,g){return a.runInTransaction(function(a){var f=(h||(h=d("I64"))).to_int32(g);(f===15||f===16)&&c("FBLogger")("occam").mustfix("MWPFetchMessagesRangeForMessage: incorrect call to MPQ with secure mailbox");return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(a),{messageId:e,threadKey:b,threadType:g})},"readwrite","ui",void 0,f.id+":28")}g["default"]=a}),98);
__d("MWScrollUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){a.scrollIntoView()}f.scrollElementIntoView=a}),66);
__d("useMWPMessageListScroll",["MWPVisibleMessageContext.react","MWScrollUtils","Promise","react","requestAnimationFrame","useMWPSafelyMarkThreadAsRead"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.createRef;e.useCallback;var k=e.useEffect,l=e.useImperativeHandle,m=e.useRef,n=e.useState,o=e.c;function p(a,b,c){var d=a.get(b);d==null&&(d=c(),a.set(b,d));return d}function a(a,e,f,g,i,q,r,s,t,u){var v=o(37),w=m(null),x=m(!1),y;v[0]!==u||v[1]!==q?(y=function(){if(!u)return;if(q==null||x.current)return;q(!1);x.current=!0},v[0]=u,v[1]=q,v[2]=y):y=v[2];y=y;var z,A;v[3]!==q||v[4]!==g||v[5]!==i||v[6]!==f?(z=function(){var a;if(q==null||x.current)return;if(g!=null&&!g.hasMoreBefore){q(!0);x.current=!0;return}i&&i((a=(a=w.current)==null?void 0:a.getScrollerMeasurements())!=null?a:void 0,g===f);a=(a=w.current)==null?void 0:a.doesContentFillScroll;if(a==null)return;if(a()){q(!1);x.current=!0;return}},A=[q,g,i,f],v[3]=q,v[4]=g,v[5]=i,v[6]=f,v[7]=z,v[8]=A):(z=v[7],A=v[8]);k(z,A);z=n(!0);A=z[0];var B=z[1],C=(g==null?void 0:g.hasMoreAfter)===!1;v[9]!==C?(z=function(){return new(h||(h=b("Promise")))(function(a){var b=w.current;b==null?a(!1):c("requestAnimationFrame")(function(){a(b.isAtBottom()&&C)})})},v[9]=C,v[10]=z):z=v[10];z=z;var D=c("useMWPSafelyMarkThreadAsRead")(t,z,a,e);v[11]!==a||v[12]!==D?(t=function(){var b;b=(b=w.current)==null?void 0:b.onCloseToBottom;if(b!=null)return b(0,function(b){b&&!a()&&D()})},z=[D,a],v[11]=a,v[12]=D,v[13]=t,v[14]=z):(t=v[13],z=v[14]);k(t,z);v[15]!==r?(e=function(){var a;a=(a=w.current)==null?void 0:a.onCloseToBottom;if(a!=null&&r!=null)return a(36,r)},t=[r],v[15]=r,v[16]=e,v[17]=t):(e=v[16],t=v[17]);k(e,t);v[18]===Symbol["for"]("react.memo_cache_sentinel")?(z=function(){var a;a=(a=w.current)==null?void 0:a.onCloseToBottom;if(a!=null)return a(600,B)},v[18]=z):z=v[18];e=f==null?void 0:f.minMessageId;v[19]!==e?(t=[e],v[19]=e,v[20]=t):t=v[20];k(z,t);v[21]===Symbol["for"]("react.memo_cache_sentinel")?(e=new Map(),v[21]=e):e=v[21];var E=m(e);z=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();var F=z.setVisibleMessage;t=z.visibleMessage;var G=t==null?void 0:t.messageId;v[22]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(a){return p(E.current,a,j)},v[22]=e):e=v[22];z=e;v[23]!==G?(t=function(){var a;if(G==null)return;a=(a=E.current.get(G))==null?void 0:a.current;a!=null&&d("MWScrollUtils").scrollElementIntoView(a)},e=[G],v[23]=G,v[24]=t,v[25]=e):(t=v[24],e=v[25]);k(t,e);v[26]!==g||v[27]!==f||v[28]!==F?(t=function(){g===f&&(w.current!=null&&w.current.scrollToBottom()),F(function(){})},v[26]=g,v[27]=f,v[28]=F,v[29]=t):t=v[29];var H=t;v[30]!==H?(e=function(){return{getScrollAreaElement:function(){var a;return(a=w.current)==null?void 0:a.getScrollAreaElement()},jumpToMostRecentMessage:function(){H()},restoreScrollPosition:function(){var a;return(a=w.current)==null?void 0:a.restoreScrollPosition()}}},t=[H],v[30]=H,v[31]=e,v[32]=t):(e=v[31],t=v[32]);l(s,e,t);v[33]!==A||v[34]!==H||v[35]!==y?(s=[A,w,H,z,y],v[33]=A,v[34]=H,v[35]=y,v[36]=s):s=v[36];return s}g["default"]=a}),98);
__d("MWPBaseMessageList.react",["BaseHeadingContextWrapper.react","Box.react","CometHeroHoldTrigger.react","CometHideableComponentExperiment.react","I64","Int64Hooks","InteractionTracingMetrics","LSAuthorityLevel","LSIntEnum","LSMessageRenderingType","LSMessagingThreadTypeUtil","MAWFetchMoreMessagesWhenEnabled","MAWStateContext.react","MWPFetchMessagesPage","MWPFetchMessagesPageV2","MWPFetchMessagesRangeForMessage","MWPJumpToMostRecentMessageButtonAnimationWrapper.react","MWPMessageAuthor.react","MWPVisibleMessageContext.react","ReQL","ReQLPaginatedList.react","ReQLPaginatedList.shared","ReQLSuspense","emptyFunction","gkx","justknobx","promiseDone","react","useMWPMessageListScroll","useReStore","useShallowEqualState"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i,n=m.startTransition,o=m.useCallback,aa=m.useContext,p=m.c;function a(a){}var ba=(m=c("MAWFetchMoreMessagesWhenEnabled")==null?void 0:c("MAWFetchMoreMessagesWhenEnabled").useFetchSecureMessages)!=null?m:a;function b(){}var ca=(m=c("MAWFetchMoreMessagesWhenEnabled")==null?void 0:c("MAWFetchMoreMessagesWhenEnabled").useSecureDataStorage)!=null?m:b,q={backgroundColor:{backgroundColor:"x1eb86dx",$$css:!0},list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",isolation:"xc8icb0",overflowX:"x6ikm8r",overflowY:"x10wlt62",zIndex:"x1ja2u2z",$$css:!0},spacer:{backgroundColor:"x1eb86dx",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",$$css:!0}},r=(k||(k=d("I64"))).of_string("9999999999999");function s(a){var b=a.isCollapsed,c=a.messageId,e=a.primarySortKey;a=a.secondarySortKey;return d("ReQL").key(e,a,c,b)}function da(a,b){if(a==null||b==null)return;return(k||(k=d("I64"))).compare(b,a.maxTimestampMs)<=0?a:null}function t(a){var b=p(4),e=(h||(h=c("useReStore")))(),g,i;b[0]!==a||b[1]!==e?(g=function(){return a==null||(k||(k=d("I64"))).equal(a.minTimestampMs,(k||(k=d("I64"))).zero)?d("ReQL").empty():d("ReQL").fromTableAscending(e.tables.messages,["isCollapsed","messageId","primarySortKey","secondarySortKey"]).getKeyRange(a.threadKey).bounds({gte:d("ReQL").key(a.minTimestampMs,a.minMessageId)})},i=[e,a],b[0]=a,b[1]=e,b[2]=g,b[3]=i):(g=b[2],i=b[3]);return d("ReQLSuspense").useFirst(g,i,f.id+":151")}function ea(a){var b=p(4),e=(h||(h=c("useReStore")))(),g,i;b[0]!==a||b[1]!==e?(g=function(){return a==null||(k||(k=d("I64"))).equal(a.maxTimestampMs,r)?d("ReQL").empty():d("ReQL").fromTableDescending(e.tables.messages,["isCollapsed","messageId","primarySortKey","secondarySortKey","timestampMs"]).getKeyRange(a.threadKey).bounds({lte:d("ReQL").key(a.maxTimestampMs,a.maxMessageId)})},i=[e,a],b[0]=a,b[1]=e,b[2]=g,b[3]=i):(g=b[2],i=b[3]);return d("ReQLSuspense").useFirst(g,i,f.id+":177")}a=l.forwardRef(e);function e(a,b){var e=a.callingSurface,g=a.checkIsThreadManuallySetAsUnread;g=g===void 0?c("emptyFunction").thatReturnsFalse:g;var i=a.entryPoint,m=a.headerStyle,p=a.isSufficientContentLoadedAbove,u=a.logScrollerMetadata,v=a.onInitialLoadingCompleted;a.onPageLoaded;var w=a.onScrollToBottom,fa=a.onUserScroll,x=a.pageSize,ga=a.renderFooter,y=a.renderHeader,z=a.renderHeaderContentSpacer,A=a.renderJumpToMostRecentMessageButton,B=a.renderLoadingAnimation,C=a.renderRow,D=a.secondaryThread,E=a.setScrollTopInResetForBottomAnchor;E=E===void 0?!0:E;a.shouldPausePageLoadTracking;var F=a.thread;a=a.triggerRenderingCompleteOnResize;a=a===void 0?!1:a;var G=F.threadKey,H=F.threadType,I=D==null?void 0:D.threadKey,J=D==null?void 0:D.threadType,K=(h||(h=c("useReStore")))(),ha=aa(d("MAWStateContext.react").MAWDispatchContext),ia=ba(H),L=ca(),M=d("Int64Hooks").useCallbackInt64(function(a,b,d){c("InteractionTracingMetrics").currentInteractionLogger().forEach(function(a){c("InteractionTracingMetrics").addMarkerPoint(a.traceId,"fetch_messages_page_start","AppTiming")}),c("gkx")("239")&&L!=null?c("promiseDone")(c("MWPFetchMessagesPageV2")(K,x,d,a,H,b,J,L,ha).then(function(){c("InteractionTracingMetrics").currentInteractionLogger().forEach(function(a){c("InteractionTracingMetrics").addMarkerPoint(a.traceId,"fetch_messages_page_end","AppTiming")})})):c("promiseDone")(c("MWPFetchMessagesPage")(K,x,d,a,H,b,J,ia).then(function(){c("InteractionTracingMetrics").currentInteractionLogger().forEach(function(a){c("InteractionTracingMetrics").addMarkerPoint(a.traceId,"fetch_messages_page_end","AppTiming")})}))},[L,K,x,H,J,ha,ia]),ja=d("Int64Hooks").useCallbackInt64(function(a){c("promiseDone")(c("MWPFetchMessagesRangeForMessage")(K,G,a,H))},[K,G,H]),N=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(K.tables.messages_ranges_v2__generated).getKeyRange(G)},[K,G],f.id+":339"),O=d("ReQLSuspense").useFirst(function(){return I==null?d("ReQL").empty():d("ReQL").fromTableDescending(K.tables.messages_ranges_v2__generated).getKeyRange(I)},[K,I],f.id+":346"),P=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();P=P.visibleMessage;var Q=P==null?void 0:P.messageId,R=P==null?void 0:P.timestamp,S=d("ReQLSuspense").useFirst(function(){return Q!=null&&R!=null?d("ReQL").fromTableAscending(K.tables.messages,["isCollapsed","messageId","primarySortKey","secondarySortKey"]).getKeyRange(G,R,Q):d("ReQL").empty()},[K,G,Q,R],f.id+":361"),T=da(d("ReQLSuspense").useFirst(function(){return R!=null?d("ReQL").fromTableDescending(K.tables.messages_ranges_v2__generated).getKeyRange(G).bounds({lte:[R]}):d("ReQL").empty()},[K,R,G],f.id+":374"),R);P=c("useShallowEqualState")({displayMessage:void 0,displayMessagesRange:N});var U=P[0],ka=P[1],V=o(function(a){return n(function(){return ka(a)})},[ka,n]);P=U.displayMessage;U=U.displayMessagesRange;d("Int64Hooks").useEffectInt64(function(){Q==null||R==null?V(function(a){return babelHelpers.extends({},a,{displayMessage:void 0,displayMessagesRange:N})}):T==null?ja(Q):T.minMessageId===Q&&T.hasMoreBefore?M(d("ReQL").key(T.threadKey,T.minTimestampMs,T.minMessageId),null,"before"):T.maxMessageId===Q&&T.hasMoreAfter?M(d("ReQL").key(T.threadKey,T.minTimestampMs,T.minMessageId),null,"after"):S!=null&&V(function(a){return babelHelpers.extends({},a,{displayMessage:S,displayMessagesRange:T})})},[N,M,ja,V,S,Q,R,T]);var W=t(U),X=ea(U),la=t(O);g=c("useMWPMessageListScroll")(g,i,N,U,u,v,w,b,F,a);i=g[0];var Y=g[1];u=g[2];var ma=g[3];v=g[4];w=d("Int64Hooks").useMemoInt64(function(){var a=K.tables.messages.index("messageDisplayOrder"),b=d("LSMessagingThreadTypeUtil").isCMSubthread(H),e=K.tables.messages.index("messageSubthreadKey");function f(a,b){var e=a.getKeyRange(G).filter(function(a){var b=a.isCollapsed;a=a.messageRenderingType;return!b&&!(k||(k=d("I64"))).equal(a,(k||(k=d("I64"))).of_int32(c("LSMessageRenderingType").HIDDEN))});return I==null?b!=null?d("ReQL").union(d("ReQL").prependKey(b.getKeyRange(G),0),d("ReQL").prependKey(e,1)):d("ReQL").prependKey(e,1):d("ReQL").union(d("ReQL").prependKey(a.getKeyRange(I).filter(function(a){a=a.isCollapsed;return!a}),0),d("ReQL").prependKey(e,1))}var g=f(d("ReQL").fromTableAscending(a),b?d("ReQL").fromTableAscending(e):void 0);f=f(d("ReQL").fromTableDescending(a),b?d("ReQL").fromTableDescending(e):void 0);return d("ReQLPaginatedList.shared").fromIterables(g,f)},[K,I,G,H]);b=U!=null&&(k||(k=d("I64"))).equal(U.maxTimestampMs,r);a=U!=null&&(k||(k=d("I64"))).equal(U.minTimestampMs,(k||(k=d("I64"))).zero);g=O!=null&&(k||(k=d("I64"))).equal(O.minTimestampMs,(k||(k=d("I64"))).zero);var na=(e=e)!=null?e:"thread_view";e=o(function(a,b,e){var f=b.nextItem;b=b.previousItem;return l.jsx(c("CometHideableComponentExperiment.react"),{callingSurface:na,disableHiding:!0,scrollport:function(){var a;return(a=Y.current)==null?void 0:a.getScrollAreaElement()},unmountXStyle:q.backgroundColor,children:l.jsx(d("MWPMessageAuthor.react").MWPMessageAuthor,{contactId:a.senderId,threadKey:a.threadKey,children:C({domElementRef:ma(a.messageId),message:a,nextMessage:f,prevMessage:b,rowIndexFromBottom:e})})},a.offlineThreadingId)},[ma,C,na,Y]);var Z=(k||(k=d("I64"))).equal(F.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))&&d("LSMessagingThreadTypeUtil").isCMSubthread(F.threadType);if((U==null||W==null&&!a||X==null&&!b)&&!Z){if((k||(k=d("I64"))).equal(F.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)))return l.jsxs(l.Fragment,{children:[l.jsx(c("CometHeroHoldTrigger.react"),{description:"MWChatWaitingForDisplayState-optimisticThread",hold:!0}),y!=null?y():null]});F=U==null?"displayMessagesRangeNull":W==null&&!a?"noMinMessage":X==null&&!b?"noMaxMessage":"other";return l.jsxs(l.Fragment,{children:[l.jsx(c("CometHeroHoldTrigger.react"),{description:"MWChatWaitingForDisplayState-"+F,hold:!0}),B!=null?B(!1):null]})}var $=!Z&&U!=null?d("ReQL").key(U.threadKey,U.minTimestampMs,U.minMessageId):null,oa=O==null?null:d("ReQL").key(O.threadKey,O.minTimestampMs,O.minMessageId);a=P==null?"bottom":[1].concat(s(P));b=W==null?la==null||g?null:[0].concat(s(la)):[1].concat(s(W));F=X==null?null:[1].concat(s(X));return l.jsxs(c("Box.react"),{xstyle:q.list,children:[l.jsx(c("BaseHeadingContextWrapper.react"),{children:l.jsx(c("ReQLPaginatedList.react"),{bounds:{gte:b,lte:F},data:w,hasReachedBottom:!Z&&U!=null?!U.hasMoreAfter:!0,hasReachedTop:!Z&&U!=null?O==null?!(U.hasMoreBefore||D!=null):!(U.hasMoreBefore||O.hasMoreBefore):!0,headerStyle:m,imperativeRef:Y,initialAnchor:a,initialRenderComplete:v,isSufficientContentLoadedAbove:p,onReachingBottom:!Z&&$!=null?function(){M($,oa,"after")}:c("emptyFunction"),onReachingTop:!Z&&$!=null?function(){M($,oa,"before")}:c("emptyFunction"),onUserScroll:fa,pageSize:x,renderFooter:ga,renderHeader:y,renderHeaderContentSpacer:z!=null?z:function(){return l.jsx(c("Box.react"),{xstyle:q.spacer})},renderItem:e,renderLoadingAnimation:function(a,b){a=a==="onTop"&&b>c("justknobx")._("2674");return l.jsxs(l.Fragment,{children:[B==null?void 0:B(a),l.jsx(c("CometHeroHoldTrigger.react"),{description:"MessageListLoadingMoreItems",hold:!a})]})},setScrollTopInResetForBottomAnchor:E,xstyle:q.list})}),A&&l.jsx(c("MWPJumpToMostRecentMessageButtonAnimationWrapper.react"),{visible:!Z&&U!=null?!i||U.hasMoreAfter:!1,children:A(u)})]})}e.displayName=e.name+" [from "+f.id+"]";m=a;g.default=m}),98);
__d("MWPMessageRowCalculateStatus.react",["GenderConst","I64","MAWThreadCutover","MWClickedMessageContext.react","MWMessageDeliveryStatus","MWPActor.react","MWPThreadCapabilitiesContext","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","gkx","react","useGetMediaGroupInformation","useMWIsReadReceiptsDisabledForThread","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;j||(j=d("react"));b=j;var k=b.useEffect,l=b.useState,m=b.c;function a(a){var b=m(111),e=a.children,g=a.isBroadcastChannel,j=a.isBroadcastThread,l=a.isLargeGroup,p=a.isSecureGroupThread,r=a.isSecureThread,s=a.message,t=a.nextMessage,u=g===void 0?!1:g,v=d("MWPActor.react").useActor(),w=(h||(h=c("useReStore")))();b[0]!==v||b[1]!==s.senderId?(g=(i||(i=d("I64"))).equal(v,s.senderId),b[0]=v,b[1]=s.senderId,b[2]=g):g=b[2];g=g;var x=t!=null&&!(i||(i=d("I64"))).equal(v,t.senderId),y=s.isUnsent,z=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();z=z.seenCountV2Enabled;var A=!s.isUnsent&&z,B=t==null;z=c("useMWIsReadReceiptsDisabledForThread")(s.threadKey);r=c("useGetMediaGroupInformation")(s,r);var C=c("MWClickedMessageContext.react").useHook(),D=C.clickedMessageId,E=C.fetchMessageSeenCount,F=C.hasError;C=C.isLoading;var G;b[3]!==A||b[4]!==w.tables.community_chat_message_seen_count||b[5]!==s.threadKey||b[6]!==s.messageId?(G=function(){return A?d("ReQL").fromTableAscending(w.tables.community_chat_message_seen_count,["seenCount"]).getKeyRange(s.threadKey,s.messageId):d("ReQL").empty()},b[3]=A,b[4]=w.tables.community_chat_message_seen_count,b[5]=s.threadKey,b[6]=s.messageId,b[7]=G):G=b[7];var H;b[8]!==w||b[9]!==A||b[10]!==s.threadKey||b[11]!==s.messageId?(H=[w,A,s.threadKey,s.messageId],b[8]=w,b[9]=A,b[10]=s.threadKey,b[11]=s.messageId,b[12]=H):H=b[12];G=d("ReQLSuspense").useFirst(G,H,f.id+":102");b[13]!==u||b[14]!==B||b[15]!==E||b[16]!==s.threadKey||b[17]!==s.messageId?(H=function(){u===!0&&B&&E(s.threadKey,s.messageId)},b[13]=u,b[14]=B,b[15]=E,b[16]=s.threadKey,b[17]=s.messageId,b[18]=H):H=b[18];var I;b[19]!==E||b[20]!==s.messageId||b[21]!==s.threadKey||b[22]!==B||b[23]!==u||b[24]!==g?(I=[E,s.messageId,s.threadKey,B,u,g],b[19]=E,b[20]=s.messageId,b[21]=s.threadKey,b[22]=B,b[23]=u,b[24]=g,b[25]=I):I=b[25];k(H,I);b[26]!==B?(H=function(a){return!B&&a.length===0},I=[B],b[26]=B,b[27]=H,b[28]=I):(H=b[27],I=b[28]);H=o(a,H,I);b[29]!==w.tables.participants||b[30]!==s.threadKey||b[31]!==v?(I=function(){return d("ReQL").fromTableDescending(w.tables.participants.index("threadKeyReadWatermarkTimestampMs"),["contactId"]).getKeyRange(s.threadKey).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,v)}).take(1)},b[29]=w.tables.participants,b[30]=s.threadKey,b[31]=v,b[32]=I):I=b[32];var J;b[33]!==s.threadKey||b[34]!==v?(J=[s.threadKey,v],b[33]=s.threadKey,b[34]=v,b[35]=J):J=b[35];var K=q(I,n,J).length>0;b[36]!==w.tables.participants||b[37]!==s.threadKey||b[38]!==s.timestampMs||b[39]!==v?(I=function(){return d("ReQL").fromTableDescending(w.tables.participants.index("threadKeyReadWatermarkTimestampMs"),["readWatermarkTimestampMs","contactId"]).getKeyRange(s.threadKey).bounds({gte:d("ReQL").key(s.timestampMs)}).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,v)}).take(1)},b[36]=w.tables.participants,b[37]=s.threadKey,b[38]=s.timestampMs,b[39]=v,b[40]=I):I=b[40];b[41]!==K?(J=function(a){return K&&a.length>0},b[41]=K,b[42]=J):J=b[42];var L;b[43]!==s.timestampMs||b[44]!==s.threadKey||b[45]!==v||b[46]!==K?(L=[s.timestampMs,s.threadKey,v,K],b[43]=s.timestampMs,b[44]=s.threadKey,b[45]=v,b[46]=K,b[47]=L):L=b[47];I=q(I,J,L);var M=I.length>0;b[48]!==w.tables.participants||b[49]!==s.threadKey||b[50]!==s.timestampMs||b[51]!==v?(J=function(){return d("ReQL").fromTableDescending(w.tables.participants.index("threadKeyDeliveredWatermarkTimestampMs"),["contactId"]).getKeyRange(s.threadKey).bounds({gte:d("ReQL").key(s.timestampMs)}).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,v)}).take(1)},b[48]=w.tables.participants,b[49]=s.threadKey,b[50]=s.timestampMs,b[51]=v,b[52]=J):J=b[52];b[53]!==M?(L=function(a){return a.length>0||M},b[53]=M,b[54]=L):L=b[54];b[55]!==s.threadKey||b[56]!==s.timestampMs||b[57]!==M||b[58]!==v?(I=[s.threadKey,s.timestampMs,M,v],b[55]=s.threadKey,b[56]=s.timestampMs,b[57]=M,b[58]=v,b[59]=I):I=b[59];J=q(J,L,I).length>0;b[60]!==M?(L=function(a){return M&&a.length===0},I=[M],b[60]=M,b[61]=L,b[62]=I):(L=b[61],I=b[62]);L=o(a,L,I);if(s.isAdminMessage){b[63]!==e?(I=e({type:"NoneStatus"}),b[63]=e,b[64]=I):I=b[64];return I}if(j)if(!A){if(!g||t!=null||y){b[65]!==e?(I=e({type:"NoneStatus"}),b[65]=e,b[66]=I):I=b[66];return I}}else{if(D!==s.messageId){b[67]!==e?(j=e({type:"NoneStatus"}),b[67]=e,b[68]=j):j=b[68];return j}if(C){b[69]!==e?(I=e({type:"Loading"}),b[69]=e,b[70]=I):I=b[70];return I}if(F){b[71]!==e?(D=e({type:"RetriableError"}),b[71]=e,b[72]=D):D=b[72];return D}b[73]!==G||b[74]!==e?(j=G!=null?e(d("MWMessageDeliveryStatus").seenCount((i||(i=d("I64"))).to_int32(G.seenCount))):e({type:"Loading"}),b[73]=G,b[74]=e,b[75]=j):j=b[75];return j}if(!g){if(p&&!c("gkx")("3265")||l){b[76]!==e?(C=e({type:"NoneStatus"}),b[76]=e,b[77]=C):C=b[77];return C}if(u===!0){b[78]!==G||b[79]!==e?(I=G!=null?e(d("MWMessageDeliveryStatus").seenCount((i||(i=d("I64"))).to_int32(G.seenCount))):e({type:"NoneStatus"}),b[78]=G,b[79]=e,b[80]=I):I=b[80];return I}b[81]!==H||b[82]!==a?(F=H.length>0?a.children(d("MWMessageDeliveryStatus").seenHead(H)):a.children({type:"NoneStatus"}),b[81]=H,b[82]=a,b[83]=F):F=b[83];return F}if(g&&B&&u&&(G!=null&&(i||(i=d("I64"))).to_int32(G.seenCount)>0)){b[84]!==G.seenCount||b[85]!==e?(D=e(d("MWMessageDeliveryStatus").seenCount((i||(i=d("I64"))).to_int32(G.seenCount))),b[84]=G.seenCount,b[85]=e,b[86]=D):D=b[86];return D}if(x&&p){b[87]!==e?(j=e({type:"NoneStatus"}),b[87]=e,b[88]=j):j=b[88];return j}if((i||(i=d("I64"))).equal(s.sendStatusV2,(i||(i=d("I64"))).of_int32(0))){b[89]!==e?(C=e({type:"NoneStatus"}),b[89]=e,b[90]=C):C=b[90];return C}if((i||(i=d("I64"))).equal(s.sendStatusV2,(i||(i=d("I64"))).of_int32(4))||(i||(i=d("I64"))).equal(s.sendStatusV2,(i||(i=d("I64"))).of_int32(5))){b[91]!==e?(I=e({type:"Error"}),b[91]=e,b[92]=I):I=b[92];return I}if((i||(i=d("I64"))).equal(s.sendStatusV2,(i||(i=d("I64"))).of_int32(1))){b[93]!==e?(H=e({type:"Sending"}),b[93]=e,b[94]=H):H=b[94];return H}if((i||(i=d("I64"))).equal(s.sendStatusV2,(i||(i=d("I64"))).of_int32(6))){b[95]!==e?(a=e({type:"Sent"}),b[95]=e,b[96]=a):a=b[96];return a}if(l)if(t!=null||y){b[97]!==e?(F=e({type:"NoneStatus"}),b[97]=e,b[98]=F):F=b[98];return F}else if((i||(i=d("I64"))).equal(s.sendStatusV2,(i||(i=d("I64"))).of_int32(2))){b[99]!==e?(g=e({type:"Delivered"}),b[99]=e,b[100]=g):g=b[100];return g}if(M&&!z){b[101]!==L||b[102]!==e?(G=L.length>0?e(d("MWMessageDeliveryStatus").seenHead(L)):e({type:"NoneStatus"}),b[101]=L,b[102]=e,b[103]=G):G=b[103];return G}if(r!=null&&r.isMediaGroupLastMessage)if(r.hasAllMessagesSent){b[104]!==e?(D=e({type:"Sent"}),b[104]=e,b[105]=D):D=b[105];return D}else{b[106]!==e?(x=e({type:"Sending"}),b[106]=e,b[107]=x):x=b[107];return x}b[108]!==J||b[109]!==e?(p=J?e({type:"Delivered"}):e({type:"Sent"}),b[108]=J,b[109]=e,b[110]=p):p=b[110];return p}function n(a){return a.length>0}function o(a,b,e){var g=m(25),j=(h||(h=c("useReStore")))(),k=d("MWPActor.react").useActor(),l=a.message,n=a.nextMessage,o=c("useMWIsReadReceiptsDisabledForThread")(l.threadKey),r;g[0]!==a.isSecureThread||g[1]!==l.threadKey?(r=a.isSecureThread?(i||(i=d("I64"))).to_string(l.threadKey):void 0,g[0]=a.isSecureThread,g[1]=l.threadKey,g[2]=r):r=g[2];a=d("MAWThreadCutover").useGetCutoverSecureThreadKey(r);g[3]!==a?(r=a!=null?(i||(i=d("I64"))).of_string(a):null,g[3]=a,g[4]=r):r=g[4];var s=r;g[5]!==n||g[6]!==l.timestampMs||g[7]!==l.threadKey||g[8]!==j.tables.participants||g[9]!==j.tables.contacts||g[10]!==k||g[11]!==s?(a=function(){var a=n!=null?{gte:d("ReQL").key(l.timestampMs),lt:d("ReQL").key(n.timestampMs)}:{gte:d("ReQL").key(l.timestampMs)};a=d("ReQL").fromTableAscending(j.tables.participants.index("threadKeyReadWatermarkTimestampMs"),["contactId","nickname","readActionTimestampMs"]).getKeyRange(l.threadKey).bounds(a).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,k)});var b={gte:d("ReQL").key(l.timestampMs)},c=s!=null?d("ReQL").fromTableAscending(j.tables.participants.index("threadKeyReadWatermarkTimestampMs"),["contactId","nickname","readActionTimestampMs"]).getKeyRange(s).bounds(b).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,k)}):d("ReQL").empty();return d("ReQL").union(a,c).map(function(a){var b=d("ReQLSuspense").toArray(c,f.id+":430").some(function(b){return(i||(i=d("I64"))).equal(b.contactId,a.contactId)});if(b)return;return a}).filter(Boolean).map(function(a){var b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(j.tables.contacts,["id","name","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs"]).getKeyRange(a.contactId),f.id+":445");return[a,b]})},g[5]=n,g[6]=l.timestampMs,g[7]=l.threadKey,g[8]=j.tables.participants,g[9]=j.tables.contacts,g[10]=k,g[11]=s,g[12]=a):a=g[12];r=n==null?void 0:n.timestampMs;var t=n==null,u=s==null,v;g[13]!==j||g[14]!==l.threadKey||g[15]!==l.timestampMs||g[16]!==r||g[17]!==t||g[18]!==u||g[19]!==k||g[20]!==e?(v=[j,l.threadKey,l.timestampMs,r,t,u,k].concat(e),g[13]=j,g[14]=l.threadKey,g[15]=l.timestampMs,g[16]=r,g[17]=t,g[18]=u,g[19]=k,g[20]=e,g[21]=v):v=g[21];r=q(a,b,v);g[22]!==o||g[23]!==r?(t=o?[]:r.map(p).filter(Boolean),g[22]=o,g[23]=r,g[24]=t):t=g[24];return t}function p(a){var b,e=a[0];a=a[1];if(a==null)return;return{gender:c("GenderConst").UNKNOWN_SINGULAR,id:(i||(i=d("I64"))).to_string(a.id),imageSrc:c("getLSMediaContactProfilePictureUrl")(a),name:(b=e.nickname)!=null?b:a.name,timestamp:i.to_float(e.readActionTimestampMs)}}function q(a,b,c){var e=l(void 0),g=e[0];e=e[1];c=d("ReQLSuspense").useArray(function(){return g!=null?d("ReQL").empty():a()},[].concat(c,[g]),f.id+":505");b(c)&&g==null&&e(c);return g!=null?g:c}g["default"]=a}),98);
__d("StylexHelpers.bs",[],(function(a,b,c,d,e,f,g){"use strict";a={visuallyHidden:{clip:"xzpqnlu",clipPath:"x1hyvwdk",height:"xjm9jq1",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",width:"x1i1rx1s",$$css:!0}};g.styles=a}),98);